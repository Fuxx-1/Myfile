import{_ as R,u as U,f as v,r as q,g as P,a as i,h as Y,b as e,w as t,i as j,F as E,e as F,E as m,o as O,d as n,t as T,j as w,k as H}from"./index-ca6a7fa3.js";const W={class:"page"},A={__name:"Search",setup(J){const c=U(),f=v(!0),h=v(!1),s=q({name:"",page:1,size:5}),r=v([{}]),I={name:null,offset:1,size:5,updateWith(a){return this.name=a.name,this.offset=(parseInt(a.page)-1)*parseInt(a.size),this.size=parseInt(a.size),this}},D=a=>{let l=r.value[a];c.push({path:"/home/searchById",query:{id:l.id}})},$=a=>{let l=r.value[a];c.push({path:"/home/updateById",query:{id:l.id}})},N=a=>{let l=r.value[a];c.push({path:"/home/delete",query:{id:l.id}})},S=()=>{c.push("/home/add")},g=()=>{F.post("/book/query",JSON.stringify(I.updateWith(s)),{headers:{"Content-Type":"application/json"}}).then(a=>{a.code==0?(r.value=a.data.bookInfos,m({type:"success",showClose:!0,message:"查询成功"})):(m({type:"error",showClose:!0,message:a.msg}),console.error(a))}).catch(a=>{m({type:"error",showClose:!0,message:"查询失败"}),console.error(a)})};P(r,async()=>{s.page>1?f.value=!1:f.value=!0,s.size==r.value.length?h.value=!1:h.value=!0});const C=a=>{s.page+=a,s.page<1?(s.page=1,m({type:"warning",duration:1e3,showClose:!0,message:"已经是第一页了"})):g()},x=()=>{s.name="",m({duration:1e3,type:"warning",showClose:!0,message:"清除成功"})},k=a=>H(a).format("YYYY-MM-DD HH:mm:ss");return g(),(a,l)=>{const _=i("el-input"),b=i("el-form-item"),y=i("el-col"),V=i("el-row"),d=i("el-button"),B=i("el-form"),u=i("el-table-column"),M=i("el-table"),p=i("el-text");return O(),Y(E,null,[e(B,{model:s,"label-width":"100px",class:"form"},{default:t(()=>[e(V,{gutter:20},{default:t(()=>[e(y,{span:15},{default:t(()=>[e(b,{label:"关键字搜索"},{default:t(()=>[e(_,{modelValue:s.name,"onUpdate:modelValue":l[0]||(l[0]=o=>s.name=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{span:5},{default:t(()=>[e(b,{label:"页大小"},{default:t(()=>[e(_,{modelValue:s.size,"onUpdate:modelValue":l[1]||(l[1]=o=>s.size=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(d,{type:"primary",onClick:g},{default:t(()=>[n("查询")]),_:1}),e(d,{onClick:x},{default:t(()=>[n("清除关键字")]),_:1})]),_:1})]),_:1},8,["model"]),e(M,{data:r.value,class:"table"},{default:t(()=>[e(u,{fixed:"",prop:"id",label:"id",width:"50"}),e(u,{prop:"name",label:"Name",width:"200"}),e(u,{prop:"price",label:"Price",width:"100"}),e(u,{prop:"margin",label:"Margin",width:"100"}),e(u,{prop:"createId",label:"CreateId",width:"100"}),e(u,{prop:"createTime",label:"create",width:"200"},{default:t(({row:o})=>[n(T(k(o.createTime)),1)]),_:1}),e(u,{prop:"updateTime",label:"update",width:"200"},{default:t(({row:o})=>[n(T(k(o.updateTime)),1)]),_:1}),e(u,{fixed:"right",label:"Operations",width:"200"},{default:t(o=>[e(d,{link:"",type:"primary",size:"small",onClick:w(z=>D(o.$index),["prevent"])},{default:t(()=>[n(" Detail ")]),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",size:"small",onClick:w(z=>$(o.$index),["prevent"])},{default:t(()=>[n(" Update ")]),_:2},1032,["onClick"]),e(d,{link:"",type:"primary",size:"small",onClick:w(z=>N(o.$index),["prevent"])},{default:t(()=>[n(" Remove ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),j("div",W,[e(V,{gutter:20},{default:t(()=>[e(y,{span:15,class:"col"},{default:t(()=>[e(p,{class:"customText"},{default:t(()=>[n("第")]),_:1}),e(_,{class:"num",modelValue:s.page,"onUpdate:modelValue":l[2]||(l[2]=o=>s.page=o)},null,8,["modelValue"]),e(p,{class:"customText"},{default:t(()=>[n("页")]),_:1}),e(p,{class:"customText"},{default:t(()=>[n("/")]),_:1}),e(p,{class:"customText"},{default:t(()=>[n("每页")]),_:1}),e(_,{class:"num",modelValue:s.size,"onUpdate:modelValue":l[3]||(l[3]=o=>s.size=o)},null,8,["modelValue"]),e(p,{class:"lastText"},{default:t(()=>[n("个")]),_:1}),e(d,{onClick:x},{default:t(()=>[n("跳转")]),_:1}),e(d,{type:"primary",onClick:l[4]||(l[4]=o=>C(-1)),disabled:f.value},{default:t(()=>[n("上一页")]),_:1},8,["disabled"]),e(d,{type:"primary",onClick:l[5]||(l[5]=o=>C(1)),disabled:h.value},{default:t(()=>[n("下一页")]),_:1},8,["disabled"]),e(d,{class:"mt-4 button",onClick:S,type:"info",plain:""},{default:t(()=>[n("增加一项")]),_:1})]),_:1})]),_:1})])],64)}}},G=R(A,[["__scopeId","data-v-471fb31f"]]);export{G as default};
