import{o as v,h as C,i as m,u as x,r as k,a as u,c as U,w as o,b as l,l as B,d as f,e as E,E as d}from"./index-ca6a7fa3.js";/*! Element Plus Icons Vue v2.1.0 */var N=(p,e)=>{let i=p.__vccOpts||p;for(let[c,_]of e)i[c]=_;return i},$={name:"UploadFilled"},A={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},L=m("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"},null,-1),S=[L];function j(p,e,i,c,_,h){return v(),C("svg",A,S)}var z=N($,[["render",j],["__file","upload-filled.vue"]]);const F=m("div",{class:"el-upload__text"},[f(" Drop file here or "),m("em",null,"click to upload")],-1),H=m("div",{class:"el-upload__tip"}," jpg/png files with a size less than 5mb ",-1),O={__name:"Add",setup(p){x();const e=k({name:"",price:"",margin:"",detail:"",picture:"",author:""}),i=()=>{E.post("/book",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then(a=>{a.code==0?d({type:"success",showClose:!0,message:"更新成功"}):(d({type:"error",showClose:!0,message:a.msg}),console.error(a))}).catch(a=>{d({type:"error",showClose:!0,message:"更新失败"}),console.error(a)})},c=()=>{e.name="",e.price="",e.margin="",e.detail="",e.picture="",e.author="",d({duration:1e3,type:"warning",showClose:!0,message:"清除成功"})},_=(a,t,n)=>{e.picture=a.data,d({type:"success",showClose:!0,message:"上传成功"})},h=(a,t,n)=>{d({type:"success",showClose:!0,message:"上传失败"})},V=a=>{console.log(a.length)};return(a,t)=>{const n=u("el-input"),r=u("el-form-item"),w=u("el-icon"),y=u("el-upload"),g=u("el-button"),b=u("el-form");return v(),U(b,{model:e,"label-width":"50px",style:{padding:"70px"}},{default:o(()=>[l(r,{label:"书名"},{default:o(()=>[l(n,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=s=>e.name=s)},null,8,["modelValue"])]),_:1}),l(r,{label:"价格"},{default:o(()=>[l(n,{modelValue:e.price,"onUpdate:modelValue":t[1]||(t[1]=s=>e.price=s)},null,8,["modelValue"])]),_:1}),l(r,{label:"库存"},{default:o(()=>[l(n,{modelValue:e.margin,"onUpdate:modelValue":t[2]||(t[2]=s=>e.margin=s)},null,8,["modelValue"])]),_:1}),l(r,{label:"详情"},{default:o(()=>[l(n,{modelValue:e.detail,"onUpdate:modelValue":t[3]||(t[3]=s=>e.detail=s),type:"textarea"},null,8,["modelValue"])]),_:1}),l(r,{label:"图片"},{default:o(()=>[l(y,{class:"upload-demo",drag:"",style:{width:"100%"},action:"http://127.0.0.1:8080/file",name:"multipartFile","on-success":_,"on-error":h,"auto-upload":"",limit:1,"before-upload":V},{tip:o(()=>[H]),default:o(()=>[l(w,{class:"el-icon--upload"},{default:o(()=>[l(B(z))]),_:1}),F]),_:1})]),_:1}),l(r,{label:"作者"},{default:o(()=>[l(n,{modelValue:e.author,"onUpdate:modelValue":t[4]||(t[4]=s=>e.author=s)},null,8,["modelValue"])]),_:1}),l(r,null,{default:o(()=>[l(g,{type:"primary",onClick:i},{default:o(()=>[f("创建")]),_:1}),l(g,{type:"info",onClick:c},{default:o(()=>[f("清除")]),_:1})]),_:1})]),_:1},8,["model"])}}};export{O as default};
